<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">
    系统最优 vs 用户最优：Braess悖论示例
  </text>
  
  <!-- Network topology section -->
  <text x="150" y="70" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">
    网络拓扑
  </text>
  
  <!-- Network nodes -->
  <circle cx="100" cy="120" r="15" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
  <text x="100" y="125" text-anchor="middle" font-size="12" fill="white" font-weight="bold">O</text>
  
  <circle cx="200" cy="120" r="15" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
  <text x="200" y="125" text-anchor="middle" font-size="12" fill="white" font-weight="bold">D</text>
  
  <circle cx="150" cy="90" r="12" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
  <text x="150" y="95" text-anchor="middle" font-size="10" fill="white" font-weight="bold">A</text>
  
  <circle cx="150" cy="150" r="12" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
  <text x="150" y="155" text-anchor="middle" font-size="10" fill="white" font-weight="bold">B</text>
  
  <!-- Network edges -->
  <!-- O to A -->
  <line x1="115" y1="120" x2="135" y2="95" stroke="#333" stroke-width="2"/>
  <text x="125" y="100" font-size="10" fill="#333">t = f</text>
  
  <!-- O to B -->
  <line x1="115" y1="120" x2="135" y2="145" stroke="#333" stroke-width="2"/>
  <text x="125" y="140" font-size="10" fill="#333">t = 1</text>
  
  <!-- A to D -->
  <line x1="165" y1="95" x2="185" y2="120" stroke="#333" stroke-width="2"/>
  <text x="175" y="100" font-size="10" fill="#333">t = 1</text>
  
  <!-- B to D -->
  <line x1="165" y1="150" x2="185" y2="125" stroke="#333" stroke-width="2"/>
  <text x="175" y="145" font-size="10" fill="#333">t = f</text>
  
  <!-- A to B (dashed line for optional edge) -->
  <line x1="150" y1="102" x2="150" y2="138" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="160" y="125" font-size="10" fill="#666">t = 0</text>
  
  <!-- Demand annotation -->
  <text x="150" y="180" text-anchor="middle" font-size="12" fill="#333">需求: 1 单位从O到D</text>
  
  <!-- System Optimal section -->
  <text x="350" y="70" text-anchor="middle" font-size="14" font-weight="bold" fill="#27ae60">
    系统最优 (SO)
  </text>
  
  <!-- SO Network -->
  <g transform="translate(250, 0)">
    <!-- Nodes -->
    <circle cx="100" cy="120" r="15" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="100" y="125" text-anchor="middle" font-size="12" fill="white" font-weight="bold">O</text>
    
    <circle cx="200" cy="120" r="15" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
    <text x="200" y="125" text-anchor="middle" font-size="12" fill="white" font-weight="bold">D</text>
    
    <circle cx="150" cy="90" r="12" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
    <text x="150" y="95" text-anchor="middle" font-size="10" fill="white" font-weight="bold">A</text>
    
    <circle cx="150" cy="150" r="12" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
    <text x="150" y="155" text-anchor="middle" font-size="10" fill="white" font-weight="bold">B</text>
    
    <!-- Edges with flow -->
    <!-- O to A - thick green line for flow 0.5 -->
    <line x1="115" y1="120" x2="135" y2="95" stroke="#27ae60" stroke-width="6"/>
    <text x="118" y="100" font-size="10" fill="#27ae60" font-weight="bold">0.5</text>
    
    <!-- O to B - thick green line for flow 0.5 -->
    <line x1="115" y1="120" x2="135" y2="145" stroke="#27ae60" stroke-width="6"/>
    <text x="118" y="140" font-size="10" fill="#27ae60" font-weight="bold">0.5</text>
    
    <!-- A to D - thick green line for flow 0.5 -->
    <line x1="165" y1="95" x2="185" y2="120" stroke="#27ae60" stroke-width="6"/>
    <text x="182" y="100" font-size="10" fill="#27ae60" font-weight="bold">0.5</text>
    
    <!-- B to D - thick green line for flow 0.5 -->
    <line x1="165" y1="150" x2="185" y2="125" stroke="#27ae60" stroke-width="6"/>
    <text x="182" y="145" font-size="10" fill="#27ae60" font-weight="bold">0.5</text>
    
    <!-- A to B - no flow -->
    <line x1="150" y1="102" x2="150" y2="138" stroke="#ccc" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="160" y="125" font-size="10" fill="#ccc">0</text>
  </g>
  
  <!-- SO results -->
  <text x="350" y="200" text-anchor="middle" font-size="12" fill="#27ae60">
    路径1 (O→A→D): 流量 = 0.5, 时间 = 1.5
  </text>
  <text x="350" y="220" text-anchor="middle" font-size="12" fill="#27ae60">
    路径2 (O→B→D): 流量 = 0.5, 时间 = 1.5
  </text>
  <text x="350" y="240" text-anchor="middle" font-size="12" fill="#27ae60" font-weight="bold">
    总出行时间 = 1.5
  </text>
  
  <!-- User Equilibrium section -->
  <text x="600" y="70" text-anchor="middle" font-size="14" font-weight="bold" fill="#e74c3c">
    用户最优 (UE)
  </text>
  
  <!-- UE Network -->
  <g transform="translate(500, 0)">
    <!-- Nodes -->
    <circle cx="100" cy="120" r="15" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="100" y="125" text-anchor="middle" font-size="12" fill="white" font-weight="bold">O</text>
    
    <circle cx="200" cy="120" r="15" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
    <text x="200" y="125" text-anchor="middle" font-size="12" fill="white" font-weight="bold">D</text>
    
    <circle cx="150" cy="90" r="12" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
    <text x="150" y="95" text-anchor="middle" font-size="10" fill="white" font-weight="bold">A</text>
    
    <circle cx="150" cy="150" r="12" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
    <text x="150" y="155" text-anchor="middle" font-size="10" fill="white" font-weight="bold">B</text>
    
    <!-- Edges with flow -->
    <!-- All flow goes through A-B path -->
    <line x1="115" y1="120" x2="135" y2="95" stroke="#e74c3c" stroke-width="6"/>
    <text x="118" y="100" font-size="10" fill="#e74c3c" font-weight="bold">1.0</text>
    
    <line x1="150" y1="102" x2="150" y2="138" stroke="#e74c3c" stroke-width="6"/>
    <text x="160" y="125" font-size="10" fill="#e74c3c" font-weight="bold">1.0</text>
    
    <line x1="165" y1="150" x2="185" y2="125" stroke="#e74c3c" stroke-width="6"/>
    <text x="182" y="145" font-size="10" fill="#e74c3c" font-weight="bold">1.0</text>
    
    <!-- Other edges with no flow -->
    <line x1="115" y1="120" x2="135" y2="145" stroke="#ccc" stroke-width="2"/>
    <text x="118" y="140" font-size="10" fill="#ccc">0</text>
    
    <line x1="165" y1="95" x2="185" y2="120" stroke="#ccc" stroke-width="2"/>
    <text x="182" y="100" font-size="10" fill="#ccc">0</text>
  </g>
  
  <!-- UE results -->
  <text x="600" y="200" text-anchor="middle" font-size="12" fill="#e74c3c">
    路径1 (O→A→D): 流量 = 0, 时间 = 2
  </text>
  <text x="600" y="220" text-anchor="middle" font-size="12" fill="#e74c3c">
    路径2 (O→B→D): 流量 = 0, 时间 = 2
  </text>
  <text x="600" y="240" text-anchor="middle" font-size="12" fill="#e74c3c">
    路径3 (O→A→B→D): 流量 = 1, 时间 = 2
  </text>
  <text x="600" y="260" text-anchor="middle" font-size="12" fill="#e74c3c" font-weight="bold">
    总出行时间 = 2.0
  </text>
  
  <!-- Comparison section -->
  <rect x="50" y="300" width="700" height="160" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1" rx="5"/>
  <text x="400" y="330" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">
    Braess悖论解释
  </text>
  
  <text x="70" y="360" font-size="12" fill="#333">
    • 在系统最优中，管理者控制流量分配，使总出行时间最小化
  </text>
  <text x="70" y="380" font-size="12" fill="#333">
    • 在用户最优中，每个用户选择对自己最优的路径，但由于信息不完全，所有用户都选择O→A→B→D
  </text>
  <text x="70" y="400" font-size="12" fill="#333">
    • 增加A→B边（成本为0）反而使用户最优解的总出行时间增加，这就是Braess悖论
  </text>
  <text x="70" y="420" font-size="12" fill="#e74c3c" font-weight="bold">
    • 效率损失 (Price of Anarchy) = 2.0 / 1.5 = 1.33
  </text>
  
  <!-- Legend -->
  <g transform="translate(50, 440)">
    <line x1="0" y1="0" x2="20" y2="0" stroke="#27ae60" stroke-width="6"/>
    <text x="25" y="5" font-size="11" fill="#333">系统最优流量</text>
    
    <line x1="150" y1="0" x2="170" y2="0" stroke="#e74c3c" stroke-width="6"/>
    <text x="175" y="5" font-size="11" fill="#333">用户最优流量</text>
    
    <line x1="300" y1="0" x2="320" y2="0" stroke="#ccc" stroke-width="2"/>
    <text x="325" y="5" font-size="11" fill="#333">无流量</text>
  </g>
</svg>
