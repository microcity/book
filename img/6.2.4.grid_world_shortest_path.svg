<?xml version="1.0" encoding="UTF-8"?>
<svg width="700" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
     refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- 背景 -->
  <rect width="700" height="600" fill="#f8f9fa"/>
  
  <!-- 标题 -->
  <text x="350" y="25" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">网格世界最短路径问题</text>
  
  <!-- 网格世界 -->
  <g>
    <text x="200" y="60" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">5×5 网格世界</text>
    
    <!-- 网格线 -->
    <g stroke="#333" stroke-width="2" fill="none">
      <rect x="100" y="80" width="200" height="200"/>
      <!-- 垂直线 -->
      <line x1="140" y1="80" x2="140" y2="280"/>
      <line x1="180" y1="80" x2="180" y2="280"/>
      <line x1="220" y1="80" x2="220" y2="280"/>
      <line x1="260" y1="80" x2="260" y2="280"/>
      <!-- 水平线 -->
      <line x1="100" y1="120" x2="300" y2="120"/>
      <line x1="100" y1="160" x2="300" y2="160"/>
      <line x1="100" y1="200" x2="300" y2="200"/>
      <line x1="100" y1="240" x2="300" y2="240"/>
    </g>
    
    <!-- 起点 -->
    <circle cx="120" cy="100" r="15" fill="#4CAF50" stroke="#333" stroke-width="2"/>
    <text x="120" y="106" font-family="Arial" font-size="12" text-anchor="middle" fill="white">S</text>
    
    <!-- 终点 -->
    <circle cx="280" cy="260" r="15" fill="#F44336" stroke="#333" stroke-width="2"/>
    <text x="280" y="266" font-family="Arial" font-size="12" text-anchor="middle" fill="white">G</text>
    
    <!-- 障碍物 -->
    <rect x="180" y="120" width="40" height="40" fill="#666" stroke="#333" stroke-width="2"/>
    <text x="200" y="145" font-family="Arial" font-size="12" text-anchor="middle" fill="white">X</text>
    
    <rect x="140" y="200" width="40" height="40" fill="#666" stroke="#333" stroke-width="2"/>
    <text x="160" y="225" font-family="Arial" font-size="12" text-anchor="middle" fill="white">X</text>
    
    <!-- 最短路径 -->
    <path d="M 120 120 L 120 140 L 120 180 L 140 180 L 160 180 L 200 180 L 240 180 L 240 200 L 240 220 L 260 220 L 280 220 L 280 240" 
          stroke="#2196F3" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- 价值函数显示 -->
    <g font-family="Arial" font-size="10" fill="#333">
      <!-- 第一行 -->
      <text x="120" y="95" text-anchor="middle">-8</text>
      <text x="160" y="95" text-anchor="middle">-7</text>
      <text x="200" y="95" text-anchor="middle">-6</text>
      <text x="240" y="95" text-anchor="middle">-7</text>
      <text x="280" y="95" text-anchor="middle">-8</text>
      
      <!-- 第二行 -->
      <text x="120" y="135" text-anchor="middle">-7</text>
      <text x="160" y="135" text-anchor="middle">-6</text>
      <!-- 障碍物 -->
      <text x="240" y="135" text-anchor="middle">-6</text>
      <text x="280" y="135" text-anchor="middle">-7</text>
      
      <!-- 第三行 -->
      <text x="120" y="175" text-anchor="middle">-6</text>
      <text x="160" y="175" text-anchor="middle">-5</text>
      <text x="200" y="175" text-anchor="middle">-4</text>
      <text x="240" y="175" text-anchor="middle">-5</text>
      <text x="280" y="175" text-anchor="middle">-6</text>
      
      <!-- 第四行 -->
      <text x="120" y="215" text-anchor="middle">-7</text>
      <!-- 障碍物 -->
      <text x="200" y="215" text-anchor="middle">-3</text>
      <text x="240" y="215" text-anchor="middle">-2</text>
      <text x="280" y="215" text-anchor="middle">-3</text>
      
      <!-- 第五行 -->
      <text x="120" y="255" text-anchor="middle">-8</text>
      <text x="160" y="255" text-anchor="middle">-7</text>
      <text x="200" y="255" text-anchor="middle">-4</text>
      <text x="240" y="255" text-anchor="middle">-1</text>
      <text x="280" y="255" text-anchor="middle">0</text>
    </g>
  </g>
  
  <!-- 右侧：状态转移图 -->
  <g>
    <text x="500" y="60" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">状态转移模型</text>
    
    <!-- 中心状态 -->
    <circle cx="500" cy="140" r="20" fill="#2196F3" stroke="#333" stroke-width="2"/>
    <text x="500" y="146" font-family="Arial" font-size="12" text-anchor="middle" fill="white">s</text>
    
    <!-- 四个相邻状态 -->
    <circle cx="500" cy="90" r="15" fill="#FF9800" stroke="#333" stroke-width="2"/>
    <text x="500" y="96" font-family="Arial" font-size="10" text-anchor="middle" fill="white">s₁</text>
    
    <circle cx="560" cy="140" r="15" fill="#FF9800" stroke="#333" stroke-width="2"/>
    <text x="560" y="146" font-family="Arial" font-size="10" text-anchor="middle" fill="white">s₂</text>
    
    <circle cx="500" cy="190" r="15" fill="#FF9800" stroke="#333" stroke-width="2"/>
    <text x="500" y="196" font-family="Arial" font-size="10" text-anchor="middle" fill="white">s₃</text>
    
    <circle cx="440" cy="140" r="15" fill="#FF9800" stroke="#333" stroke-width="2"/>
    <text x="440" y="146" font-family="Arial" font-size="10" text-anchor="middle" fill="white">s₄</text>
    
    <!-- 动作箭头 -->
    <g stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)">
      <line x1="500" y1="120" x2="500" y2="105"/>
      <line x1="520" y1="140" x2="545" y2="140"/>
      <line x1="500" y1="160" x2="500" y2="175"/>
      <line x1="480" y1="140" x2="455" y2="140"/>
    </g>
    
    <!-- 动作标签 -->
    <g font-family="Arial" font-size="10" fill="#666">
      <text x="505" y="112" >↑</text>
      <text x="532" y="135">→</text>
      <text x="505" y="172">↓</text>
      <text x="465" y="135">←</text>
    </g>
    
    <!-- 奖励函数 -->
    <text x="500" y="230" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">奖励函数</text>
    <text x="430" y="250" font-family="Arial" font-size="11" fill="#333">R(s,a,s') = -1 (移动到普通格子)</text>
    <text x="430" y="265" font-family="Arial" font-size="11" fill="#333">R(s,a,s') = -∞ (移动到障碍物)</text>
    <text x="430" y="280" font-family="Arial" font-size="11" fill="#333">R(s,a,s') = 0  (到达目标)</text>
  </g>
  
  <!-- 底部：算法实现 -->
  <rect x="50" y="320" width="600" height="250" fill="#e8f4fd" stroke="#1976d2" stroke-width="2" rx="10"/>
  <text x="350" y="345" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">动态规划求解步骤</text>
  
  <!-- 步骤1 -->
  <rect x="80" y="360" width="120" height="40" fill="#4CAF50" stroke="#333" rx="5"/>
  <text x="140" y="375" font-family="Arial" font-size="11" text-anchor="middle" fill="white">1. 状态空间建模</text>
  <text x="140" y="390" font-family="Arial" font-size="10" text-anchor="middle" fill="white">S = {(i,j) | 0≤i,j≤4}</text>
  
  <!-- 箭头1 -->
  <polygon points="210,380 225,375 225,385" fill="#333"/>
  <line x1="200" y1="380" x2="220" y2="380" stroke="#333" stroke-width="2"/>
  
  <!-- 步骤2 -->
  <rect x="230" y="360" width="120" height="40" fill="#2196F3" stroke="#333" rx="5"/>
  <text x="290" y="375" font-family="Arial" font-size="11" text-anchor="middle" fill="white">2. 动作空间定义</text>
  <text x="290" y="390" font-family="Arial" font-size="10" text-anchor="middle" fill="white">A = {↑,→,↓,←}</text>
  
  <!-- 箭头2 -->
  <polygon points="360,380 375,375 375,385" fill="#333"/>
  <line x1="350" y1="380" x2="370" y2="380" stroke="#333" stroke-width="2"/>
  
  <!-- 步骤3 -->
  <rect x="380" y="360" width="120" height="40" fill="#FF9800" stroke="#333" rx="5"/>
  <text x="440" y="375" font-family="Arial" font-size="11" text-anchor="middle" fill="white">3. 转移概率</text>
  <text x="440" y="390" font-family="Arial" font-size="10" text-anchor="middle" fill="white">P(s'|s,a) = 1</text>
  
  <!-- 箭头3 -->
  <polygon points="510,380 525,375 525,385" fill="#333"/>
  <line x1="500" y1="380" x2="520" y2="380" stroke="#333" stroke-width="2"/>
  
  <!-- 步骤4 -->
  <rect x="530" y="360" width="100" height="40" fill="#9C27B0" stroke="#333" rx="5"/>
  <text x="580" y="375" font-family="Arial" font-size="11" text-anchor="middle" fill="white">4. 价值迭代</text>
  <text x="580" y="390" font-family="Arial" font-size="10" text-anchor="middle" fill="white">Bellman更新</text>
  
  <!-- Bellman方程 -->
  <text x="350" y="430" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Bellman最优方程</text>
  <text x="350" y="450" font-family="Arial" font-size="12" text-anchor="middle" fill="#333">V*(s) = max {R(s,a) + γ Σₛ' P(s'|s,a) V*(s')}</text>
  <text x="350" y="470" font-family="Arial" font-size="12" text-anchor="middle" fill="#333">对于网格世界: V*(s) = max {-1 + γ V*(s')}</text>
  
  <!-- 算法收敛 -->
  <text x="350" y="500" font-family="Arial" font-size="12" text-anchor="middle" fill="#333">算法特点：</text>
  <text x="200" y="520" font-family="Arial" font-size="11" fill="#333">• 状态空间有限，保证收敛</text>
  <text x="200" y="535" font-family="Arial" font-size="11" fill="#333">• 每次迭代更新所有状态的价值</text>
  <text x="400" y="520" font-family="Arial" font-size="11" fill="#333">• 最终策略为贪婪策略</text>
  <text x="400" y="535" font-family="Arial" font-size="11" fill="#333">• 时间复杂度: O(|S|²|A|T)</text>
  
  <!-- 复杂度说明 -->
  <text x="350" y="555" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">其中T为收敛所需的迭代次数，通常远小于状态数</text>
  
</svg>
