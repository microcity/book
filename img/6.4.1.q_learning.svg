<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: 'SimHei', Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: 'SimHei', Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #34495e; }
      .label { font-family: 'SimHei', Arial, sans-serif; font-size: 12px; fill: #34495e; }
      .small-label { font-family: 'SimHei', Arial, sans-serif; font-size: 10px; fill: #7f8c8d; }
      .formula { font-family: 'Times New Roman', serif; font-size: 11px; fill: #2c3e50; }
      .agent-box { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .env-box { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .action-arrow { stroke: #f39c12; stroke-width: 3; marker-end: url(#orange-arrow); }
      .reward-arrow { stroke: #27ae60; stroke-width: 3; marker-end: url(#green-arrow); }
      .state-arrow { stroke: #9b59b6; stroke-width: 3; marker-end: url(#purple-arrow); }
      .process-box { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 1; }
      .highlight-box { fill: #fff3cd; stroke: #ffeaa7; stroke-width: 2; }
    </style>
    <marker id="orange-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f39c12"/>
    </marker>
    <marker id="green-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
    <marker id="purple-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9b59b6"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="300" y="25" class="title" text-anchor="middle">Q学习算法原理</text>
  
  <!-- Main RL Loop -->
  <g transform="translate(50, 50)">
    <!-- Agent -->
    <rect x="50" y="50" width="100" height="60" rx="5" class="agent-box"/>
    <text x="100" y="75" class="label" text-anchor="middle">智能体</text>
    <text x="100" y="90" class="small-label" text-anchor="middle">(Agent)</text>
    <text x="100" y="105" class="formula" text-anchor="middle">Q(s,a)</text>
    
    <!-- Environment -->
    <rect x="350" y="50" width="100" height="60" rx="5" class="env-box"/>
    <text x="400" y="75" class="label" text-anchor="middle">环境</text>
    <text x="400" y="90" class="small-label" text-anchor="middle">(Environment)</text>
    <text x="400" y="105" class="formula" text-anchor="middle">P(s'|s,a), R(s,a)</text>
    
    <!-- Action arrow -->
    <path d="M 150 70 Q 250 40, 350 70" class="action-arrow"/>
    <text x="250" y="35" class="label" text-anchor="middle">动作 aₜ</text>
    
    <!-- Reward arrow -->
    <path d="M 350 90 Q 250 120, 150 90" class="reward-arrow"/>
    <text x="250" y="135" class="label" text-anchor="middle">奖励 rₜ₊₁</text>
    
    <!-- State arrow -->
    <path d="M 350 110 Q 250 140, 150 110" class="state-arrow"/>
    <text x="250" y="155" class="label" text-anchor="middle">状态 sₜ₊₁</text>
  </g>
  
  <!-- Q-Learning Update -->
  <g transform="translate(50, 200)">
    <text x="250" y="0" class="subtitle" text-anchor="middle">Q学习更新过程</text>
    
    <!-- Step boxes -->
    <rect x="0" y="20" width="120" height="40" class="process-box"/>
    <text x="60" y="35" class="small-label" text-anchor="middle">1. 观察状态 s</text>
    <text x="60" y="50" class="small-label" text-anchor="middle">选择动作 a</text>
    
    <rect x="140" y="20" width="120" height="40" class="process-box"/>
    <text x="200" y="35" class="small-label" text-anchor="middle">2. 执行动作 a</text>
    <text x="200" y="50" class="small-label" text-anchor="middle">获得 r, s'</text>
    
    <rect x="280" y="20" width="120" height="40" class="process-box"/>
    <text x="340" y="35" class="small-label" text-anchor="middle">3. 更新Q值</text>
    <text x="340" y="50" class="small-label" text-anchor="middle">Q(s,a) ← ...</text>
    
    <rect x="420" y="20" width="120" height="40" class="process-box"/>
    <text x="480" y="35" class="small-label" text-anchor="middle">4. 状态转移</text>
    <text x="480" y="50" class="small-label" text-anchor="middle">s ← s'</text>
    
    <!-- Arrows between steps -->
    <path d="M 120 40 L 135 40" stroke="#34495e" stroke-width="2" marker-end="url(#arrow)"/>
    <path d="M 260 40 L 275 40" stroke="#34495e" stroke-width="2" marker-end="url(#arrow)"/>
    <path d="M 400 40 L 415 40" stroke="#34495e" stroke-width="2" marker-end="url(#arrow)"/>
    
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#34495e"/>
    </marker>
  </g>
  
  <!-- Q-Learning Formula -->
  <g transform="translate(50, 300)">
    <rect x="0" y="0" width="500" height="80" class="highlight-box"/>
    <text x="250" y="20" class="subtitle" text-anchor="middle">Q学习更新公式</text>
    <text x="250" y="45" class="formula" text-anchor="middle">Q(sₜ, aₜ) ← Q(sₜ, aₜ) + α[rₜ₊₁ + γ max Q(sₜ₊₁, a') - Q(sₜ, aₜ)]</text>
    <text x="250" y="65" class="small-label" text-anchor="middle">其中：α为学习率，γ为折扣因子，max为贪婪选择</text>
  </g>
  
  <!-- Algorithm Properties -->
  <g transform="translate(50, 400)">
    <text x="250" y="0" class="subtitle" text-anchor="middle">算法特点</text>
    
    <g transform="translate(0, 20)">
      <text x="0" y="0" class="label">优点：</text>
      <text x="0" y="18" class="small-label">• 无需环境模型（model-free）</text>
      <text x="0" y="36" class="small-label">• 离策略学习（off-policy）</text>
      <text x="0" y="54" class="small-label">• 收敛到最优Q函数</text>
      
      <text x="250" y="0" class="label">应用领域：</text>
      <text x="250" y="18" class="small-label">• 游戏AI（围棋、电竞）</text>
      <text x="250" y="36" class="small-label">• 机器人控制</text>
      <text x="250" y="54" class="small-label">• 资源调度优化</text>
    </g>
  </g>
</svg>
